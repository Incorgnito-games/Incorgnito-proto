[gd_scene load_steps=10 format=3 uid="uid://cotw4n4ywong5"]

[ext_resource type="PackedScene" uid="uid://bdph25s15icec" path="res://scenes/building.tscn" id="1_2jkkl"]
[ext_resource type="PackedScene" uid="uid://cko4ymg5gdbnl" path="res://scenes/actors/npc.tscn" id="1_2ue7f"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_pkipv"]

[sub_resource type="Sky" id="Sky_5ja4l"]
sky_material = SubResource("ProceduralSkyMaterial_pkipv")

[sub_resource type="Environment" id="Environment_364ig"]
background_mode = 2
sky = SubResource("Sky_5ja4l")
ambient_light_source = 3

[sub_resource type="NavigationMesh" id="NavigationMesh_6h8at"]
vertices = PackedVector3Array(-44, -2.03443, -45, -42, -2.03443, -45, -42, -2.03443, -49.5, -49.5, -2.03443, -43.5, -44.25, -2.03443, -43.25, -49.5, -2.03443, -49.5, -30.25, -2.03443, -45, -30.25, -2.03443, -49.5, -1.5, -2.03443, -31, -0.75, -2.03443, -31, -0.5, -2.03443, -31.5, 1.5, -2.03443, -49.5, -28, -2.03443, -44.75, -28, -2.03443, -29, -29.75, -2.03443, -28.75, -29.5, -2.03443, -27.75, -20, -2.03443, -27.75, -19.75, -2.03443, -26, -9.25, -2.03443, -22.5, 1.5, -2.03443, -31.5, 24.25, -2.03443, -31.5, 24.25, -2.03443, -33, 22, -2.03443, -33.25, 22, -2.03443, -49, 30, -2.03443, -49.25, 30, -2.03443, -49.5, 38.25, -2.03443, -49, 49.5, -2.03443, -49.5, 38.25, -2.03443, -33.25, 49.5, -2.03443, -31.5, 23, 2.96557, -48.25, 23, 2.96557, -34, 37.25, 2.96557, -34, 37.25, 2.96557, -48.25, -43.25, 2.96557, -44, -43.25, 2.96557, -29.75, -29, 2.96557, -29.75, -29, 2.96557, -44, -44.25, -2.03443, -29, -49.5, -2.03443, -27.75, -2.25, 1.96557, -28.75, -2, 1.96557, -28.25, -1, 1.96557, -29.25, -1.25, 1.96557, -29.75, 23.75, -2.03443, -23.5, 26, -2.03443, -23.75, 26, -2.03443, -29.25, 0, -2.03443, -29.25, 0, -2.03443, -28.75, 25.25, -2.03443, -1.25, 25.5, -2.03443, -7.5, 23.75, -2.03443, -7.75, 0.5, -2.03443, -1.25, -12, -2.03443, -15.5, -2.75, -2.03443, -4.5, 37.75, -2.03443, -23.75, 37.75, -2.03443, -29.25, 40, -2.03443, -23.5, 49.5, -2.03443, -29.25, 40, -2.03443, -8, 49.5, -2.03443, -8, -4.25, 1.96557, -26.5, -4, 1.96557, -26, -3, 1.96557, -27, -3.25, 1.96557, -27.5, -17.25, -2.03443, -13.5, -15.25, -2.03443, -15.25, -15.25, -2.03443, -15.75, -20, -2.03443, -25.5, -27.5, -2.03443, -25.5, -26, -2.03443, -17.5, -13.25, -2.03443, -17.5, -13.25, -2.03443, -18, -11.25, -2.03443, -19.75, -11.25, -2.03443, -20.25, -9.25, -2.03443, -22, -27.75, -2.03443, -17.75, -25.75, -2.03443, -3.5, -49.5, -2.03443, -16.25, -42.25, -2.03443, -16, -42.25, -2.03443, -17.5, -40.5, -2.03443, -17.75, -40.75, -2.03443, -25.5, -49.5, -2.03443, -25.5, -6.25, 1.96557, -24.25, -6, 1.96557, -23.75, -5, 1.96557, -24.75, -5.25, 1.96557, -25.25, -8.25, 1.96557, -22, -8, 1.96557, -21.5, -7, 1.96557, -22.5, -7.25, 1.96557, -23, 24.75, 2.96557, -22.75, 24.75, 2.96557, -8.5, 39, 2.96557, -8.5, 39, 2.96557, -22.75, -10.25, 1.96557, -19.75, -10, 1.96557, -19.25, -9, 1.96557, -20.25, -9.25, 1.96557, -20.75, -12.25, 1.96557, -17.5, -12, 1.96557, -17, -11, 1.96557, -18, -11.25, 1.96557, -18.5, -41.25, 2.96557, -16.75, -41.25, 2.96557, -2.5, -27, 2.96557, -2.5, -27, 2.96557, -16.75, -49.5, -2.03443, -3, -42.25, -2.03443, -3.25, -14.25, 1.96557, -15.25, -14, 1.96557, -14.75, -13, 1.96557, -15.75, -13.25, 1.96557, -16.25, -19.5, -2.03443, -7, -16.25, 1.96557, -13, -16, 1.96557, -12.5, -14.75, 1.96557, -13.75, -15, 1.96557, -14.25, -18.25, 1.96557, -10.75, -18, 1.96557, -10.25, -16.75, 1.96557, -11.5, -17, 1.96557, -12, -20, 1.96557, -8.75, -19.75, 1.96557, -8.25, -18.75, 1.96557, -9.25, -19, 1.96557, -9.75, 39.75, -2.03443, -7.5, 38.25, -2.03443, -7.5, 38.5, -2.03443, -1.25, 49.5, -2.03443, -1.25, -22, 1.96557, -6.5, -21.75, 1.96557, -6, -20.75, 1.96557, -7, -21, 1.96557, -7.5, 0, -2.03443, -0.75, -23.25, -2.03443, -2.75, -24, 1.96557, -4.25, -23.75, 1.96557, -3.75, -22.75, 1.96557, -4.75, -23, 1.96557, -5.25, -42, -2.03443, -1.5, -49.5, -2.03443, 6.25, -34.75, -2.03443, 6.5, -27.75, -2.03443, -1.5, -26, 1.96557, -2, -25.75, 1.96557, -1.5, -24.75, 1.96557, -2.5, -25, 1.96557, -3, -34.75, -2.03443, 7.5, -34, -2.03443, 8.25, -49.5, -2.03443, 49.5, 0.25, -2.03443, 1, -33, -2.03443, 8.25, 2.25, -2.03443, 1, 2.25, -2.03443, 49.5, -28, 1.96557, 0.25, -27.75, 1.96557, 0.75, -26.75, 1.96557, -0.25, -27, 1.96557, -0.75, 49.5, -2.03443, 49.5, 49.5, -2.03443, 1, -30, 1.96557, 2.5, -29.75, 1.96557, 3, -28.75, 1.96557, 2, -29, 1.96557, 1.5, -32, 1.96557, 4.75, -31.75, 1.96557, 5.25, -30.75, 1.96557, 4.25, -31, 1.96557, 3.75, -33.75, 1.96557, 6.75, -33.25, 1.96557, 7, -32.75, 1.96557, 6.5, -33, 1.96557, 6)
polygons = [PackedInt32Array(2, 1, 0), PackedInt32Array(0, 4, 3), PackedInt32Array(3, 5, 0), PackedInt32Array(0, 5, 2), PackedInt32Array(2, 7, 1), PackedInt32Array(1, 7, 6), PackedInt32Array(9, 8, 10), PackedInt32Array(10, 8, 11), PackedInt32Array(11, 8, 12), PackedInt32Array(11, 12, 7), PackedInt32Array(14, 13, 15), PackedInt32Array(15, 13, 16), PackedInt32Array(12, 6, 7), PackedInt32Array(13, 12, 16), PackedInt32Array(16, 12, 8), PackedInt32Array(17, 16, 18), PackedInt32Array(18, 16, 8), PackedInt32Array(11, 19, 10), PackedInt32Array(21, 20, 22), PackedInt32Array(22, 20, 19), PackedInt32Array(24, 23, 25), PackedInt32Array(25, 23, 11), PackedInt32Array(23, 22, 11), PackedInt32Array(11, 22, 19), PackedInt32Array(24, 25, 26), PackedInt32Array(26, 25, 27), PackedInt32Array(26, 27, 28), PackedInt32Array(28, 27, 29), PackedInt32Array(21, 28, 20), PackedInt32Array(20, 28, 29), PackedInt32Array(33, 32, 30), PackedInt32Array(30, 32, 31), PackedInt32Array(37, 36, 34), PackedInt32Array(34, 36, 35), PackedInt32Array(14, 15, 38), PackedInt32Array(38, 15, 39), PackedInt32Array(4, 38, 3), PackedInt32Array(3, 38, 39), PackedInt32Array(43, 42, 40), PackedInt32Array(40, 42, 41), PackedInt32Array(45, 44, 46), PackedInt32Array(46, 44, 48), PackedInt32Array(46, 48, 47), PackedInt32Array(50, 49, 51), PackedInt32Array(51, 49, 52), PackedInt32Array(54, 53, 52), PackedInt32Array(52, 53, 48), PackedInt32Array(52, 48, 51), PackedInt32Array(51, 48, 44), PackedInt32Array(46, 56, 45), PackedInt32Array(45, 56, 55), PackedInt32Array(55, 56, 57), PackedInt32Array(57, 56, 58), PackedInt32Array(59, 57, 60), PackedInt32Array(60, 57, 58), PackedInt32Array(64, 63, 61), PackedInt32Array(61, 63, 62), PackedInt32Array(66, 65, 67), PackedInt32Array(67, 65, 70), PackedInt32Array(67, 70, 68), PackedInt32Array(68, 70, 69), PackedInt32Array(71, 67, 72), PackedInt32Array(72, 67, 68), PackedInt32Array(73, 72, 74), PackedInt32Array(74, 72, 68), PackedInt32Array(75, 74, 18), PackedInt32Array(18, 74, 17), PackedInt32Array(17, 74, 68), PackedInt32Array(70, 76, 69), PackedInt32Array(65, 77, 70), PackedInt32Array(80, 79, 78), PackedInt32Array(82, 81, 80), PackedInt32Array(78, 83, 80), PackedInt32Array(80, 83, 82), PackedInt32Array(81, 82, 76), PackedInt32Array(76, 82, 69), PackedInt32Array(87, 86, 84), PackedInt32Array(84, 86, 85), PackedInt32Array(91, 90, 88), PackedInt32Array(88, 90, 89), PackedInt32Array(95, 94, 92), PackedInt32Array(92, 94, 93), PackedInt32Array(99, 98, 96), PackedInt32Array(96, 98, 97), PackedInt32Array(103, 102, 100), PackedInt32Array(100, 102, 101), PackedInt32Array(107, 106, 104), PackedInt32Array(104, 106, 105), PackedInt32Array(109, 108, 79), PackedInt32Array(79, 108, 78), PackedInt32Array(113, 112, 110), PackedInt32Array(110, 112, 111), PackedInt32Array(53, 54, 114), PackedInt32Array(118, 117, 115), PackedInt32Array(115, 117, 116), PackedInt32Array(122, 121, 119), PackedInt32Array(119, 121, 120), PackedInt32Array(126, 125, 123), PackedInt32Array(123, 125, 124), PackedInt32Array(129, 128, 127), PackedInt32Array(127, 59, 129), PackedInt32Array(129, 59, 60), PackedInt32Array(129, 60, 130), PackedInt32Array(134, 133, 131), PackedInt32Array(131, 133, 132), PackedInt32Array(50, 128, 49), PackedInt32Array(49, 128, 129), PackedInt32Array(52, 135, 54), PackedInt32Array(54, 135, 114), PackedInt32Array(114, 135, 136), PackedInt32Array(140, 139, 137), PackedInt32Array(137, 139, 138), PackedInt32Array(109, 141, 108), PackedInt32Array(108, 141, 142), PackedInt32Array(144, 143, 141), PackedInt32Array(141, 143, 142), PackedInt32Array(148, 147, 145), PackedInt32Array(145, 147, 146), PackedInt32Array(142, 143, 149), PackedInt32Array(149, 150, 142), PackedInt32Array(142, 150, 151), PackedInt32Array(135, 152, 136), PackedInt32Array(136, 152, 153), PackedInt32Array(151, 150, 153), PackedInt32Array(152, 154, 153), PackedInt32Array(153, 154, 155), PackedInt32Array(153, 155, 151), PackedInt32Array(159, 158, 156), PackedInt32Array(156, 158, 157), PackedInt32Array(154, 161, 155), PackedInt32Array(155, 161, 160), PackedInt32Array(165, 164, 162), PackedInt32Array(162, 164, 163), PackedInt32Array(169, 168, 166), PackedInt32Array(166, 168, 167), PackedInt32Array(171, 170, 172), PackedInt32Array(172, 170, 173)]

[sub_resource type="BoxShape3D" id="BoxShape3D_nxco8"]
size = Vector3(100, 1, 100)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_1vgtj"]
albedo_color = Color(0.901294, 0.444813, 0.214204, 1)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_ptwsj"]
albedo_color = Color(0.901961, 0.443137, 0.215686, 1)

[node name="CityScene" type="Node3D"]

[node name="Camera3D" type="Camera3D" parent="."]
transform = Transform3D(0.5, 0.224144, -0.836516, 0, 0.965926, 0.258819, 0.866025, -0.12941, 0.482963, -73.2915, 20, 14.4426)
projection = 1
fov = 45.0
size = 45.0

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_364ig")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="WorldEnvironment"]
transform = Transform3D(-0.836516, 0.0173376, -0.547668, -0.545085, 0.0756105, 0.834965, 0.0558857, 0.996987, -0.053799, 0, 16, 0)
shadow_enabled = true

[node name="NPC" parent="." node_paths=PackedStringArray("BuildingMap") instance=ExtResource("1_2ue7f")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.093, -1.5, 13.88)
BuildingMap = NodePath("../NavigationRegion3D/BuildingMap")

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="."]
navigation_mesh = SubResource("NavigationMesh_6h8at")

[node name="Obstacles" type="Node" parent="NavigationRegion3D"]

[node name="Wall" type="CSGBox3D" parent="NavigationRegion3D/Obstacles"]
transform = Transform3D(29.2716, 0, 0, 0, 1, 0, 0, 0, 1, -35.0111, -0.5, -26.6134)
size = Vector3(1, 4, 1)

[node name="Wall2" type="CSGBox3D" parent="NavigationRegion3D/Obstacles"]
transform = Transform3D(50.0328, 0, 0, 0, 1, 0, 0, 0, 1, 24.9929, -0.5, -30.3919)
size = Vector3(1, 4, 1)

[node name="Wall3" type="CSGBox3D" parent="NavigationRegion3D/Obstacles"]
transform = Transform3D(50.0328, 0, 0, 0, 1, 0, 0, 0, 1, 25.6719, -0.5, -0.174511)
size = Vector3(1, 4, 1)

[node name="Wall4" type="CSGBox3D" parent="NavigationRegion3D/Obstacles"]
transform = Transform3D(33.2168, 0, 0.747821, 0, 1, 0, -37.4156, 0, 0.6639, -17.2167, -0.5, -11.4425)
size = Vector3(1, 4, 1)

[node name="BuildingMap" type="CSGCombiner3D" parent="NavigationRegion3D"]

[node name="Bar" parent="NavigationRegion3D/BuildingMap" instance=ExtResource("1_2jkkl")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -34.048, 0, -9.5629)
_typeName = "Bar"

[node name="Home" parent="NavigationRegion3D/BuildingMap" instance=ExtResource("1_2jkkl")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 30.0829, 0, -41.2365)
_typeName = "Home"

[node name="Restaurant" parent="NavigationRegion3D/BuildingMap" instance=ExtResource("1_2jkkl")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 31.8802, 0, -15.5576)
_typeName = "Restaurant"

[node name="Work" parent="NavigationRegion3D/BuildingMap" instance=ExtResource("1_2jkkl")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -36.0451, 0, -36.9326)
_typeName = "Work"

[node name="Area3D" type="Area3D" parent="NavigationRegion3D/BuildingMap"]
transform = Transform3D(1, 0, 0, 0, 0.0688578, 0, 0, 0, 1, 0, -2.5, 0)

[node name="CollisionShape3D" type="CollisionShape3D" parent="NavigationRegion3D/BuildingMap/Area3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -2.5, 0)
shape = SubResource("BoxShape3D_nxco8")

[node name="Ground" type="CSGBox3D" parent="NavigationRegion3D/BuildingMap/Area3D"]
material_override = SubResource("StandardMaterial3D_1vgtj")
snap = 0.1
size = Vector3(100, 1, 100)
material = SubResource("StandardMaterial3D_ptwsj")
